<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARKET BOARD</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="/static/styles.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<section class="hero" id="home">
    <div class="hero-content">
        <h1 class="glitch-text" data-text="MARKET BOARD">MARKET BOARD</h1>
        <p class="subtitle">CSCI 112 MongoDB Market</p>
    </div>
</section>


<section class="features" id="features">
    <h2 class="section-title">Marketplace</h2>

    <div class="search-filter-bar">
        <input type="text" id="search-input" placeholder="Search items...">
        <button class="cta-button cta-secondary" onclick="sortHistoryByTime()" style="margin-left: 6px; font-size: 12px;">
            Sort
        </button>
    </div>

    <div class="features-container">

        <div class="feature-tabs">
            <div class="tab-item active" data-tab="items-tab">
                <span class="tab-icon">ðŸ›’</span>
                <span>Items for Sale</span>
            </div>
            <div class="tab-item" data-tab="history-tab">
                <span class="tab-icon">ðŸ“œ</span>
                <span>Sales History</span>
            </div>
        </div>

        <div class="feature-content">
            <div class="content-panel active" id="items-tab">
                <table class="items-table">
                    <thead>
                        <button class="cta-button cta-primary cta-success" onclick="openItemModal()">Add Item</button>
                        <tr>
                            <th>Item Name</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Purchase</th>
                        </tr>
                    </thead>
                    <tbody id="items-body"></tbody>
                </table>
            </div>

            <div class="content-panel" id="history-tab">
            <table class="history-table">
                <thead>
                    <button class="cta-button cta-primary cta-success" onclick="openHistoryModal()">Add History</button>
                    <tr>
                        <th>Buyer</th>
                        <th>Item Name</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Time</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="history-body"></tbody>
            </table>
            </div>
        </div>
    </div>
</section>

<h2 class="section-title">Analytics</h2>

<section class="charts" id="charts">
    <div class="analytics-row">
        <div class="analytics-panel">
            <h2 class="section-header">Daily Volume Chart</h2>
            <canvas id="dailyVolumeChart" class="chart-canvas"></canvas>
        </div>

        <div class="analytics-panel">
            <h2 class="section-header">Sold Item Price Statistics</h2>

            <div class="table-box">
                <table class="history-table" id="item-stats-table">
                    <thead>
                        <tr>
                            <th>Item <span class="sort-arrow"></span></th>
                            <th>Highest Price <span class="sort-arrow"></span></th>
                            <th>Lowest Price <span class="sort-arrow"></span></th>
                            <th>Average Price <span class="sort-arrow"></span></th>
                            <th>Transactions <span class="sort-arrow"></span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Item A</td><td>120</td><td>80</td><td>100</td><td>50</td></tr>
                        <tr><td>Item B</td><td>200</td><td>150</td><td>175</td><td>30</td></tr>
                        <tr><td>Item C</td><td>50</td><td>20</td><td>35</td><td>70</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="analytics-row">
        <div class="analytics-panel">
            <h2 class="section-header">Demand Stability</h2>
            <label for="stability-item-select" class="dropdown-label">Select item</label>
            <select id="stability-item-select" class="dropdown-select"></select>
            <canvas id="stabilityChart" class="chart-canvas"></canvas>
        </div>

        <div class="analytics-panel">
            <h2 class="section-header">Price Volatility Index</h2>
            <label for="price-volatility-select" class="dropdown-label">Select item</label>
            <select id="price-volatility-select" class="dropdown-select"></select>
            <canvas id="priceVolatilityChart" class="chart-canvas"></canvas>
        </div>
    </div>

</section>

<script src="/static/search.js"></script>
<script src="/static/animation.js"></script>
<script src="/static/charts.js"></script>


<div id="history-modal" class="modal-overlay">
    <div class="modal-content">
        <h3>Add History Entry</h3>
        <form id="history-form">
            <input type="text" id="history-buyer" placeholder="Buyer's Name" required>
            <input type="text" id="history-item" placeholder="Item Name" required>
            <input type="number" id="history-price" placeholder="Price" required>
            <input type="number" id="history-quantity" placeholder="Quantity Sold" required>
            <div class="modal-buttons">
                <button type="submit" class="cta-button cta-success">Add</button>
                <button type="button" class="cta-button cta-danger" id="history-cancel">Cancel</button>
            </div>
        </form>
    </div>
</div>

<div id="item-modal" class="modal-overlay">
    <div class="modal-content">
        <h3>Add Item</h3>
        <form id="item-form">
            <input type="text" id="item-username" placeholder="Your Username" required>
            <input type="text" id="item-name" placeholder="Item Name" required>
            <input type="number" id="item-price" placeholder="Price" required>
            <input type="number" id="item-quantity" placeholder="Quantity" required>
            <div class="modal-buttons">
                <button type="submit" class="cta-button cta-success">Add</button>
                <button type="button" class="cta-button cta-danger" id="item-cancel">Cancel</button>
            </div>
        </form>
    </div>
</div>

</body>
</html>
